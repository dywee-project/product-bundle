{# Dywee\ProductBundle\Resources\View\Eshop\table.html.twig #}

{%  extends "DyweeProductBundle::admin.html.twig" %}

{% block breadcrumb %}
    <li><i class="fa fa-beer"></i> Produits</li>
    <li class="active"><i class="fa fa-list-alt"></i> Liste des produits</li>
{% endblock %}

{% block viewBody %}
    <a href="{{ path('dywee_product_add', {type: type}) }}" class="btn btn-success action-right"><i class="fa fa-plus"></i> Ajouter</a>

    <div class="title-heading">
        <h1 class="text-center">Liste des {% if type == 1 %}Produits {% elseif type == 2 %}Packs {% elseif type == 3 %}Abonnements{% endif %}</h1>
    </div>

    {% if productList|length > 0 or filterActive == true %}
        <div class="row">
            <div class="col-md-9">
                <div class="box box-success">
                    {% if productList|length > 0 %}
                        <div class="table-responsive">
                            <table class="table table-striped table-hover table-condensed">
                                <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Nom</th>
                                    {#<th>Marque</th>#}
                                    {#<th>Catégories</th>#}
                                    <th>Mise à disposition</th>
                                    <th>Prix</th>
                                    <th>Stock</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for product in productList %}
                                    <tr>
                                        <td><small>{{ product.id }}</small></td>
                                        <td><a href="{{ path('dywee_product_admin_view', {id: product.id}) }}" class="link-unstyled">{{ product.name }}</a></td>
                                        {#<td><small>{{ product.brand.name }}</small></td>#}
                                        {#<td><small>{% for category in product.categories%}{{ category.name }}, {% endfor %}</small></td>#}
                                        <td>{% include 'DyweeProductBundle:Product:sellType.html.twig' %}</td>
                                        <td>{% if product.isPromotion == 1 %}
                                                <strike>{{ product.price }}€</strike> > {{ product.promotionPrice|number_format(2) }}€
                                            {% else %}
                                                {{ product.price }}€
                                            {% endif %}
                                        </td>
                                        <td>{{ product.stock }}</td>
                                        <td>{% include 'DyweeProductBundle:Product:state.html.twig' %}
                                        </td>
                                        <td class="actions"><a href="{{ path('dywee_product_admin_view', {id: product.id}) }}" class="link-unstyled"><i class="fa fa-eye"></i> </a>
                                            <a href="{{ path('dywee_product_update', {id: product.id}) }}" class="link-unstyled"><i class="fa fa-pencil"></i> </a>
                                            <a href="{{ path('dywee_product_delete', {id: product.id}) }}" class="link-unstyled" data-confirm="Êtes-vous sûr de vouloir supprimer ce produit:" data-name="{{ product.name }}"><i class="fa fa-trash-o"></i> </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="box-body">
                            <p>Il n'y a pas de produit répondant à ces critères</p>
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-3">
                <div class="box box-primary">
                    <div class="box-header with-border">
                        <h3 class="box-title"><i class="fa fa-search"></i> Recherche de produit</h3>
                    </div><!-- /.box-header -->
                    <div class="box-body">
                        {{ form(search) }}
                    </div>
                </div>
            </div>
        </div>

    {% else %}
        <p>Vous n'avez pas encore ajouté de produit.</p>
        <p><a href="{{ path('dywee_product_add', {type: type}) }}" class="btn btn-success"><i class="fa fa-plus"></i> Ajouter un produit</a></p>
    {% endif %}

{% endblock %}